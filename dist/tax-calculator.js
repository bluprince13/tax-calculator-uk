!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("TaxCalculator",[],t):"object"==typeof exports?exports.TaxCalculator=t():e.TaxCalculator=t()}(this,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),a=n(2);t.default=function(e,t){var n=a.TAX_SETTINGS,o={};o.grossIncome=e,o.options=t;var u=function(){return t.age<65?0:t.age<75?n.allowance.basic-n.allowance.age_65_74:n.allowance.basic-n.allowance.age_75_over},d=function(){return n.allowance.basic+u()-function(){var t=e-n.allowance.thresholds.taper;if(t<0)return 0;var r=t/2,a=u();return r>a?a:r}()},l=function(){return e<1e5?d()-function(){var t=e-e-e/100*5-n.allowance.thresholds.taper;if(t<0)return 0;var r=t/2,a=d();return r>a?a:r}():e>1e5&&e<=125e3?12500-(e-1e5)/2:e>=125001?0:void 0},c=function(){return l()+(!1===t.blind?0:n.allowance.blind)},i=(e-c())/100*t.pensionPercentage,s=function(){var t,n=e-(t=g()+P()+b(),r.getAmountRounded(t))-i;return r.getAmountRounded(n)},f=function(){var e=s();return r.getAmountRounded(e/52)},_=function(){var e=s();return r.getAmountRounded(e/365)},p=function(){var t=e-c()-i,r=n.incomeTax,a=v(r.rate_0,t),o=v(r.rate_20,a.carry),u=v(r.rate_40,o.carry);return{rate_0:a,rate_20:o,rate_40:u,rate_45:v(r.rate_45,u.carry)}},g=function(){var e=p(),t=e.rate_0.tax+e.rate_20.tax+e.rate_40.tax+e.rate_45.tax;return r.getAmountRounded(t)},v=function(e,t){var n=-1===e.end?t:r.getAmountRounded(e.end-e.start),a=t-n,o=a>0?a:0;return t>0?t>=n?{tax:r.getAmountRounded(n*e.rate),carry:o}:{tax:r.getAmountRounded(t*e.rate),carry:o}:{tax:0,carry:o}},y=function(){var t=e-9500,n=t-40524;if(n>0){return{rate_0:{tax:0},rate_12:{tax:4862.88},rate_2:{tax:n/100*2}}}return{rate_0:{tax:0},rate_12:{tax:t/100*12},rate_2:{tax:0}}},x=function(){var e=y(),t=e.rate_0.tax+e.rate_12.tax+e.rate_2.tax;return r.getAmountRounded(t)},m=function(){var e=x();return r.getAmountRounded(e)},b=function(){var e=m()-function(){x();return t.age>=n.nationalInsurance.pensionAge?m():0}();return r.getAmountRounded(e)},A=function(){return 1===t.studentLoanPlan?n.studentLoan.plan_1.threshold:2===t.studentLoanPlan?n.studentLoan.plan_2.threshold:0},h=function(){return 1===t.studentLoanPlan?n.studentLoan.plan_1.rate:2===t.studentLoanPlan?n.studentLoan.plan_2.rate:0},P=function(){if(0===t.studentLoanPlan)return 0;var n,a,o=(n=A(),((a=e-n)<0?0:a)*h());return r.getAmountRounded(o)};return o.getTaxBreakdown=function(){return{netIncome:{yearly:s(),monthly:(e=s(),r.getAmountRounded(e/12)),weekly:f(),daily:_()},personalAllowance:l(),paye:p(),nationalInsurance:y(),studentLoan:{plan:1===t.studentLoanPlan?"PLAN_1":2===t.studentLoanPlan?"PLAN_2":"NO_PLAN",threshold:A(),rate:h(),repayment:P()}};var e},o}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAmountRounded=function(e){return Math.round(100*e)/100}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.TAX_SETTINGS={year:"2019/20",allowance:{basic:12500,age_65_74:12500,age_75_over:12500,blind:2500,thresholds:{age:27700,taper:1e5}},incomeTax:{rate_0:{start:0,end:0,rate:0},rate_20:{start:0,end:37500,rate:.2},rate_40:{start:37500,end:15e4,rate:.4},rate_45:{start:15e4,end:-1,rate:.45}},nationalInsurance:{pensionAge:68,rate_0:{start:0,end:183,rate:0},rate_12:{start:183,end:962,rate:.12},rate_2:{start:962,end:-1,rate:.02}},studentLoan:{plan_1:{threshold:17775,rate:.09},plan_2:{threshold:21e3,rate:.09}}}}])}));